# -*- rd -*-

= NEWS --- The history of milter manager

== [release-1-6-2] 1.6.2: 2010-11-23

A bug fix release of 1.6.1.

=== milter manager

==== Improvements

  * Made PID file directory prepareing process in init
    script on Debian robust.
    [Reported by Kenji Shiono]

  * Used gint64 for time_t.
    [Suggested by OBATA Akio]

==== Fixes

  * Fixed missing temporary file close.
    [Reported by Kenji Shiono]

=== milter manager admin

==== Improvements

  * Documented required sqlite3-ruby version on CentOS.
    [Reported by Kenji Shiono]

=== Ruby milter

==== Improvements

  * Made milter-tarpit.rb, a sample milter, asynchronous.
    [Reported by Kenji Shiono]
  * Provided all milter API.

==== Fixes

  * Fixed a typo in command line option.
    [Reported by Kenji Shiono]

=== Thanks

  * Kenji Shiono
  * OBATA Akio

== [release-1-6-1] 1.6.1: 2010-08-21

A bug fix release of 1.6.0.

=== milter manager

==== Fixes

  * Fixed a bug that no statistics information isn't logged to syslog.
    [Reported by akira yamada]

=== Thanks

  * akira yamada

== [release-1-6-0] 1.6.0: 2010-08-11

The first release of stable 1.6.x series.

=== milter manager

==== Improvements

  * Added parsers for Postfix cidr_table(5) and regexp_table(5):
    PostfixCIDRTable, PostfixRegexpTable

== [release-1-5-3] 1.5.3: 2010-08-03

The last release of 1.5.x series. (plan)

=== Document

==== Improvements

  * Added a description for
    ((<SocketAddress#to_ip_address|configuration#to-ip-address>)).

=== milter manager

==== Improvements

  * Ensured to reply for negotiation on negotiation failure.
  * Reduced the default timeout for reporting timeout error
    to MTA. The previous default timeout is the same as MTA
    default. With the value, we can't have a time to report
    timeout error to MTA.
  * command launcher: Supported syslog.
  * Added an applicable condition:
    * ((<Trust|"doc/configuration.rd.ja#trust">))
  * Supported Solaris. [Patched by SATOH Fumiyasu]

=== milter manager admin

==== Improvements

  * Supported Rails 2.3.8.

=== milter-test-server

==== Improvements

  * Added ((<--color|milter-test-server#--color>)) option.
  * Added ((<--threads|milter-test-server#--threads>)) option.

=== milter-core

==== Improvements

  * Chanaged default log level to output error and critical message.

=== Ruby milter

==== Improvements

  * Added --user, --gorup, --unix-socket-group,
    --unix-socket-mode, --syslog, --library-version options.
  * Added milter-test-client implemented by Ruby as a sample.
  * Added milter-regexp.rb as a sample.

=== Thanks

  * SATOH Fumiyasu

== [release-1-5-2] 1.5.2: 2010-05-29

A bug fix release of 1.5.1.

We recommend development version users who use a milter that uses
NO_REPLY_* or milter-greylist 4.3.x upgrade to this version.

=== Document

==== Improvements

  * Created ((<available milters|available-milters>)) list.
  * Updated recommended milter-greylist configuration.

=== milter manager

==== Improvements

  * Supported S25R ((<whitelist customize
    |"doc/configuration.rd#s25r.add_whitelist">)) and
    ((<blacklist
    customize|"doc/configuration.rd#s25r.add_blacklist">)).

=== milter-manager-log-analyzer

==== Improvements

  * Supported milter-greylist 4.3.x.

=== milter-toolkit

==== Improvements

  * Used inet_pton()/inet_pton() instead of
    inet_aton()/inet_ntoa(). [Suggested by SATOH Fumiyasu]

=== Thanks

  * SATOH Fumiyasu
  * ROSSO

== [release-1-5-1] 1.5.1: 2010-04-20

A bug fix release of 1.5.0.

It includes a memory leak fix derived from Ruby/GLib2
because bundled Ruby/GLib2 is updated. If bundled Ruby/GLib2
is used, upgrade is recommended.

=== Document

==== Improvements

  * Added install document for development release on Ubuntu
    Karmic Koara.
  * Added a description that installs Rack
    explicitly. [Reported by Tsuchiya]

==== Fixes

  * FreeBSD: Fixed package name [Reported by Tsuchiya]

=== libmilter-core

==== Improvements

  * Supported syslog level change by MILTER_LOG_SYSLOG_LEVEL
    environment variable.
  * Added memory profiler.

=== milter manager

==== Improvements

  * Supported Solaris. [Reported and patched by SATOH Fumiyasu]
  * Bundled Ruby/GLib2 0.19.4.

=== milter-test-client

==== Improvements

  * Added
    ((<--report-memory-profile|milter-test-client#--report-memory-profile>)) option.

=== Thanks

  * Tsuchiya
  * SATOH Fumiyasu

== [release-1-5-0] 1.5.0: 2010-03-29

A development release.

=== Document

==== Improvements

  * For Debian GNU/Linuxãƒ»Ubuntu:
    * Removed needless group change description [Suggested by ZnZ]
  * For CentOS:
    * Used Yum instead of RPM directly.
  * For FreeBSD:
    * Upgraded target version: 7.2-RELEASE -> 8.0-RELEASE
    * Changed to use CPPFLAGS instead of CFLAGS for configure.

==== Bug fixes

  * For FreeBSD:
    * Fixed pw command options.

=== milter manager

==== Improvements

  * init script for Debian GNU/Linux:
    * Supported 'status'. [Suggested by ZnZ]
    * Delayed parameter checks until they are needed.
      [Suggested by ZnZ]
    * Removed needless dependencies. [Suggested by ZnZ]

  * [#2921072] Showed loaded configuration file path on
    verbose mode. [Suggested by Antuan Avdioukhine]
  * [#2921072] Showed file and line that are changed the
    configuration item. [Suggested by Antuan Avdioukhine]
  * [#2921078] Supported no child milter work.
    [Suggested by Antuan Avdioukhine]

  * Added configuration items:
    * ((<remove_milter|"doc/configuration.rd#remove_milter">))
    * ((<manager.connection_check_interval|"doc/configuration.rd#manager.connection_check_interval">))
    * ((<manager.define_connection_checker|"doc/configuration.rd#manager.define_connection_checker">))
    * ((<manager.use_netstat_connection_checker|"doc/configuration.rd#manager.use_netstat_connection_checker">))
    * ((<manager.report_memory_statistics|"doc/configuration.rd#manager.report_memory_statistics">))
    * ((<manager.maintained|"doc/configuration.rd#manager.maintained">))
    * ((<stress.threshold_n_connections|"doc/configuration.rd#stress.threshold_n_connections">))
    * ((<stress.threshold_n_connections=|"doc/configuration.rd#stress.threshold_n_connections=">))
    * ((<remote_network.add_local_address|"doc/configuration.rd#remote_network.add_local_address">))

  * Added new applicable conditions
    * ((<No Stress|"doc/configuration.rd#no-stress">))
    * ((<Stress Notify|"doc/configuration.rd#stress-notify">))

  * Bundled Ruby/GLib 0.19.3. (For FreeBSD)
  * Changed to use /usr/sbin/service or /sbin/service if it
    is available.

  * Supported OpenDKIM detection on CentOS.

  * Supported Syslog facility change:
    MILTER_LOG_SYSLOG_FACILITY environment variable is used.

  * ((<manager.max_file_descriptors|"doc/configuration.rd.ja#manager.max_file_descriptors">)):
    Changed both of soft and hard limit not only soft limit.

  * Supported ((<Munin|URL:http://munin-monitoring.org/>)).

  * Speed up and effective memory usage.

==== Bug fixes

  * FreeBSD: Fixed OpenDKIM detection when any profiles
    aren't used in /etc/rc.conf. [Reported by Tsuchiya]
  * Fixed a bug that applicable condition is ignored by
    Ruby's GC.

==== Experimental

  * Introduced policy framework to specify condition and
    milter all together.

=== milter-toolkit

  * Supported milter development by Ruby bindings: ((<Ruby integration|ruby>))
    * Specify --enable-ruby-milter option in configure.

=== milter-manager-log-analyzer

  * Speed up (almost 2 times faster)
  * Supported visualization about number connections that is
    disconnection from SMTP clients.

=== milter-performance-check

  * New options
    * ((<--n-concurrent-connections|"doc/milter-performance-check#--n-concurrent-connections">)):
      Specifies maximum number of concurrency connections.

=== milter-test-client

  * New options:
    * ((<--no-report-request|"doc/milter-test-client#--no-report-request">)):
      Doesn't dump requests from MTA.
    * ((<--user|"doc/milter-test-client#--user">)):
      Specifies effective user.
    * ((<--group|"doc/milter-test-client#--group">)):
      Specifies effective group.
    * ((<--unix-socket-group|"doc/milter-test-client#--unix-socket-group">)):
      Specifies UNIX domain socket's group.

=== Package

==== CentOS

  * Split to some packages.

=== Test

  * Supported ((<Cutter|URL:http://cutter.sourceforge.net/>)) 1.1.0

=== Thanks

  * ZnZ
  * Tsuchiya
  * Antuan Avdioukhine

== [release-1-4-2] 1.4.2: 2010-03-29

A bug fix release for 1.4.1.

=== Document

  * Upgraded target FreeBSD version: 7.2-RELEASE -> 8.0-RELEASE
  * Changed to use CPPFLAGS instead of CFLAGS for configure
    on FreeBSD.
  * Fixed pw command options on FreeBSD.

=== milter manager

==== Bug fixes

  * Fixed a bug that socket group isn't effected when
    both effective user and socket group are specified.
  * Fixed a bug that auto milter detection is failed on no
    OpenDKIM installed FreeBSD environment.

== [release-1-4-1] 1.4.1: 2009-10-29

A bug fix release for 1.4.0.

=== Document

  * Upgraded target CentOS version: 5.3 -> 5.4.
  * Fixed types. [Yuto Hayamizu]
  * Fixed typos. [ZnZ]

=== milter manager

==== Improvements

  * Bundled Ruby/GLib2 for CentOS.
  * add configure options for default configuration value:
    * --with-default-effective-user: effective user
    * --with-default-effective-group: effective group
    * --with-default-socket-group: group of UNIX domain socket
    * --with-default-pid-file: PID file
    * --with-default-connection-spec: listen address

==== Bug fixes

  * Fixed a bug that init script overwrites default
    configuration value on CentOS. [Reported by gorimaru]
  * Fixed a bug that needless commands are sent to finished
    child milter on evaluation mode.

=== Thanks

  * Yuto Hayamizu
  * gorimaru
  * ZnZ

== [release-1-4-0] 1.4.0: 2009-10-13

A stable release.

=== Document

  * Added install documents for Debian.

=== milter-manager

==== Improvements

  * Supported OpenDKIM detection on Debian/Ubuntu/FreeBSD.

==== Bug fixes

  * Fixed a bug that adding header statistics isn't logged
    on evaluation mode.

== [release-1-3-1] 1.3.1: 2009-09-16

A development release. Evaluation mode was added.

=== milter-manager

==== Improvements

  * Added ((<evaluation
    mode|"doc/configuration.rd#milter.evaluation_mode">))
    that ignores a result of child milter.
  * Added configuration items:
    * max number of concurrent connections:
      ((<manager.max_connections|"doc/configuration.rd#manager.max_connections">))
    * max number of file descriptors:
      ((<manager.max_file_descriptors|"doc/configuration.rd#manager.max_file_descriptors">))
  * Supported EPEL [Reported by Syunsuke Komma]
  * Supported timeout configuration based on
    milter-greylist's tarpit configuration.

=== milter-toolkit

  * Added more the Ruby bindings [Yuto Hayamizu]

=== milter manager admin

  * Supported Rails 2.3.4

=== milter-test-client

  * Added --syslog options that logs to syslog.

=== milter-manager-log-analyzer

  * Supported milter-greylist's SPF result.

=== Thanks

  * Yuto Hayamizu
  * Syunsuke Komma

== [release-1-3-0] 1.3.0: 2009-08-12

A development release.

=== milter-manager

==== Improvements

  * Improved a process for multi messages in a SMTP session.

==== Bug fixes

  * Fixed a bug that quarantine is ignored.
    [Reported by Tsuchiya]
  * Fixed a bug that discard is ignored.
    [Reported by Tsuchiya]
  * Fixed a bug that SEGV on non header mail.
    [Reported by ÐŸÐ°Ð²ÐµÐ» Ð“Ñ€Ð¸ÑˆÐ¸Ð½]

=== milter-test-server

  * Suppressed needless abort.
  * Changed to send 'continue' on 'quarantine'.

=== milter-manager-log-analyzer

  * Supported virus detection result of clamav-milter.

=== Thanks

  * Tsuchiya
  * ÐŸÐ°Ð²ÐµÐ» Ð“Ñ€Ð¸ÑˆÐ¸Ð½

== [release-1-2-0] 1.2.0: 2009-07-17

A stable release.

=== milter-manager

==== Improvements

  * Supported DATA stopper independently of MTA's milter
    protocol.

==== Bug fixes

  * Fixed a timeout problem when all milters are stopped on
    message processing. [Reported by sgyk]
  * Fixed a problem that milter-manager doesn't work with
    Postfix 2.3.3. [Reported by Fumihisa Tonaka]

=== Thanks

  * sgyk
  * Fumihisa Tonaka

== [release-1-1-1] 1.1.1: 2009-07-03

A release to be the next stable release 1.2.0.

=== milter-manager

==== Improvements

  * Reduced needless abort calls.
  * Reduced statistics logs.
  * Supported multiple instances.
    * ((<manager.custom_configuration_directory|"doc/configuration.rd.ja#manager.custom_configuration_directory">))
  * Added a configuration item that milter-manager waits how
    many seconds when milter-manager can't accept
    connections from MTA.
    * ((<manager.suspend_time_on_unacceptable|"doc/configuration.rd.ja#manager.suspend_time_on_unacceptable">))
  * Supported Momonga Linux [Suggested by Fumihisa Tonaka]
  * Supported absolute configuration file path.
  * Changed milter stop behavior on RCPT TO. A milter
    process for a stopped recipient is skipped. A milter
    process for other recipients are not effected.
  * Supported stopper callback on all events even if an
    event is ignored by milter. (events marked as SMFIP_NO*)
  * Supported multi mail transactions [Reported by sgyk]
  * Supported local configuration file
    "milter-manager.local.conf" that is loaded automatically
    if it exists.
  * [experimental] Added a sample to only apply a milter to
    restricted users.

==== Bug fixes

  * Fixed a race condition on multiple milters running.
  * Fixed a problem that error status isn't replied to MTA.
    [Reported by Fumihisa Tonaka]
  * Fixed a problem that a milter application stopped
    effects other milter application stopped.
    [Reported by sgyk]

=== milter-test-server

  * Changed to report a message is rejected or temporary
    failed if all recipients are rejected or temporary failed.

=== milter-manager-log-analyzer

  * Supported application result graphs for each milter.
  * Supported statistics graphs for each method.

=== Thanks

  * Fumihisa Tonaka
  * sgyk

== 1.1.0: 2009-06-02

A development release leading up to the next stable release 1.2.0.

=== milter-manager

  * Reduced needless logs.
  * Supported ENMA auto detection on FreeBSD.
  * Supported ClamAV 0.95 auto detection.
  * Fixed dkim-filter's skip action is ignored for a mail
    over 65535 bytes.
  * Supported unknown address family on connect.
  * Supported fallback status for each child milter.
    (milter.fallback_status)
  * Added milter ID to debug log.
  * Fixed memory leaks.
  * Supported periodical maintenance process.
    (manager.maintenance_interval)
  * Added workaround for Ruby/GLib 0.17.0.
  * Supported backtrace log on crash.
  * Added callback events to stop milter application:
    * condition.define_helo_stopper
    * condition.define_data_stopper
    * condition.define_end_of_header_stopper
    * condition.define_body_stopper
    * condition.define_end_of_message_stopper
  * Fixed a milter-manager related process isn't terminated
    on kill.
  * Stopped accepting new connection on too many file
    descriptors opened.

=== milter manager admin

  * Supported Ruby on Rails 2.3.2.

=== milter-test-server

  * Supported reply-code.
  * Added options for authentication related macros:
    * --authenticated-name=NAME
    * --authenticated-type=TYPE
    * --authenticated-author=AUTHOR

=== milter-manager-log-analyzer

  * Reduced memory usage.

=== Documentation

  * Fixed a link: [ÐŸÐ°Ð²ÐµÐ» Ð“Ñ€Ð¸ÑˆÐ¸Ð½]

== 1.0.1: 2009-05-14

A bug fix release of 1.0.0.

=== milter-manager

  * Fixed a bug that milter-manager isn't restarted on
    updating RPM package.

=== milter manager admin

  * Specified used gem version
    [Reported by nhisa]

== 1.0.0: 2009-04-16

The first stable release.

=== Documentation

  * Added man pages for commands.
  * Added --external option to clamav-milter's configuration.
  * Changed install documents for Ubuntu and CentOS to
    package based installation.

=== milter-manager

  * Added ENMA detection on CentOS.

=== milter-performance-check

  * Worked --n-mails option with --period/--interval option.

== 0.9.0: 2009-03-10

Speed and stability are improved.

=== milter-manager

  * Added a feature to change group of UNIX domain socket.
  * Speed up:
    * Changed to send milter commands in a packet.
    * Changed to process mail body on memory as far as possible.
  * configure:
    * --with-rcddir: Add a option to specify pkgsrc's rc.d directory.
  * Bug fixes:
    * Fixed a bug that a file descriptor is too closed.
    * Fixed a bug that 'temporary failure' is reported as
      'reject' in log.

=== New applicable conditions

  * sendmail-compatible:
    It's a feature to avoid macro related incompatibility
    between Sendmail's milter implementation and Postfix's
    milter implementation.
    (ref. ((<Postfix before-queue Milter support -
    Workarounds|URL:http://www.postfix.org/MILTER_README.html#workarounds>)))

    It's not an applicable condition but it uses applicable
    condition framework to convert macros passed to a milter
    by MTA. dnsbl-milter can be worked with Postfix without
    a patch(*) by the feature.

    (*) ((<[2594714] Postfix support|URL:http://sourceforge.net/tracker/?func=detail&atid=1015126&aid=2594714&group_id=210782>))

  * authentication: It's an applicable condition to apply a
    milter only when a connection is authenticated or
    unauthenticated.

=== milter-performance-check

  * Added a feature to send a file as a mail.
  * Added a feature to send each file under specified
    directories as a mail.
  * --from, --recipient, --force-from, --force-recipient:
    Added features to override from address and/or recipient
    address.
  * --interval: Added a feature to send a mail at intervals.
  * --period: Added a feature to send mails at the same
    interval in period.
  * --shuffle: Added a feature to send mails in random order.

=== milter-manager-log-analyzer

  * [incompatible]: Added an item "abort" to processed mail graph.

== 0.8.0: 2009-02-06

  * New features
    * New tools:
      * milter-manager-log-analyzer:
        It visualizes milter-manager's log.
      * milter manager admin:
        Web interface for administrating milter-manager.
      * Screenshots of the above two tools:
        The bottom of ((<Install|"doc/install.rd">)) page.
    * Add milter detection method for pkgsrc.
    * Support CentOS.
    * Applicable condition
      * Support getting status of other milter.
      * Support getting/setting macros of milter.
  * Update S25R (2009/02/01 version)
  * Bug fixes
    * [#2518782] typo in configure: [OBATA Akio]

== 0.7.0: 2009-01-16

  * Initial release on SF.net.
