2008-10-06  Kouhei Sutou  <kou@cozmixng.org>

	* milter-core/milter-handler.c (cb_decoder_body): add missing
	return value location.

	* test/client/test-client-context-header.c (setup): initialize
	variable.

2008-10-03  Hiroyuki Ikezoe  <poincare@ikezoe.net>

	* milter-client/milter-client-context.[ch],
	milter-core/milter-handler.[ch]:
	All signals moved into MilterHandler and added "-response" signal.
	milter_client_context_feed -> milter_handler_feed.
	milter_client_get_macro(s) -> milter_handler_get_macro(s).
	Added milter_handler_clear_macros.
	* milter-client/milter-client.c: Use milter_handler_feed instead of
	milter_client_context_feed.
	* libmilter/libmilter-compatible.c: Use milter_handler_get_macro
	instead of milter_client_context_get_macro.
	* test/client/*, test/libmilter/*: XXX.
	* milter-core/milter-reader.[ch]: Added.
	* test/core/test-reader.c: Added GIOChannel test.
	* milter-core/milter-reader.[ch]: Implement "ready" signal.

2008-10-03  Kouhei Sutou  <kou@cozmixng.org>

	* Makefile.am, configure.ac, milter-manager/: detect Ruby and add
	empty milter manager implementation.

	* milter-server.pc.in: fix path.

	* **/Makefile.am, enum-types.mk, marshal.mk: share enum types and
	marshalers generation code.

2008-10-02  Kouhei Sutou  <kou@cozmixng.org>

	* milter-core/milter-writer.c: remove needless NULL check.

	* milter-client/milter-client.c: remove needless variable.

	* milter-client/milter-client-context.c: don't reply on close and
	abort because connection is already closed on the time.

	* milter-client/milter-client.c: implement accept loop. It just
	works but too dirty!!! It should be re-implemented later!!!

	* *.pc.in: fix include path.

	* configure.ac, milter-server.pc.in: add milter-server.pc.in.

	* Makefile.am (pkgconfig_DATA): install *.pc.

	* milter-server/milter-server.h: add empty milter-server.h for now.

	* libmilter/Makefile.am (pkglib_LTLIBRARIES): fix install directory.

	* configure.ac: _ -> -.

	* libmilter/libmilter-compatible.c,
	test/libmilter/test-smfi-context.c: implement smfi_delrcpt().

	* libmilter/libmilter-compatible.c,
	test/libmilter/test-smfi-context.c: implement smfi_chgfrom().

	* milter-client/milter-client-context.[ch],
	test/client/test-client-context-address.c: implement
	milter_client_context_delete_receipt().

	* milter-client/milter-client-context.[ch],
	test/client/test-client-context-address.c: implement
	milter_client_context_change_from().

	* milter-core/milter-encoder.[ch], test/core/test-encoder.c:
	implement milter_encoder_encode_reply_delete_event().

	* milter-core/milter-encoder.[ch], test/core/test-encoder.c:
	implement milter_encoder_encode_reply_change_from().

	* libmilter/libmilter-compatible.c,
	test/libmilter/test-smfi-context.c: implement smfi_addrcpt{,_par}().

	* milter-client/milter-client-context.[ch],
	test/client/test-client-context-address.c: implement
	milter_client_context_add_receipt().

	* milter-core/milter-encoder.[ch], test/core/test-encoder.c:
	milter_encoder_encode_reply_add_receipt() support parameters.

	* milter-core/milter-encoder.[ch], test/core/test-encoder.c:
	implement milter_encoder_encode_reply_add_receipt().

	* libmilter/libmilter-compatible.c,
	test/libmilter/test-smfi-context.c: implement smfi_progress().

	* milter-client/milter-client-context.[ch],
	test/client/test-client-context-reply.c: implement
	milter_client_context_quarantine().

	* milter-core/milter-encoder.[ch], test/core/test-encoder.c:
	implement milter_encoder_encode_reply_quarantine().

	* libmilter/libmilter-compatible.c,
	test/libmilter/test-smfi-context.c: implement smfi_progress().

	* milter-client/milter-client-context.[ch],
	test/client/Makefile.am,
	test/client/test-client-context-reply.c: implement
	milter_client_context_progress().

	* milter-core/milter-encoder.[ch], test/core/test-encoder.c:
	implement milter_encoder_encode_reply_progress().

	* libmilter/libmilter-compatible.c,
	test/libmilter/test-smfi-context.c: implement smfi_{add,chg,ins}header().

2008-10-01  Kouhei Sutou  <kou@cozmixng.org>

	* libmilter/libmilter-compatible.[ch],
	test/libmilter/test-smfi-context.c: implement smfi_replacebody().

	* milter-client/milter-client-context.[ch],
	test/client/test-client-context-body.c: implement
	milter_client_context_replace_body().

	* milter-core/milter-protocol.h, milter-core/milter-encoder.[ch],
	test/core/test-encoder.c: implement
	milter_encoder_encode_reply_replace_body().

	* libmilter/libmilter-compatible.[ch],
	test/libmilter/test-smfi-context.c: implement smfi_getsymval().

	* libmilter/libmilter-compatible.c, test/libmilter/,
	test/Makefile.am, configure.ac: implement smfi_{get,set}priv().

	* milter-client/milter-client-context.c,
	test/client/test-client-context-header.c: context -> handler.

	* milter-client/milter-client-context.[ch],
	test/client/test-client-context-header.c: implement
	milter_client_context_insert_header().

	* milter-core/milter-encoder.[ch], test/core/test-encoder.c:
	implement milter_encoder_encode_reply_insert_header().

	* milter-client/milter-client-context.c,
	test/client/test-client-context-header.c: implement
	milter_client_context_remove_header().

	* milter-core/milter-encoder.c, test/core/test-encoder.c: add NULL
	and empty string check.

	* milter-client/milter-client-context.[ch],
	test/client/test-client-context-header.c: implement
	milter_client_context_change_header().

	* test/core/test-encoder.[ch], test/core/test-encoder.c: implement
	milter_encoder_encode_reply_change_header().

	* milter-client/milter-client-context.[ch],
	test/client/test-client-context-header.c: implement
	milter_client_context_add_header().

	* milter-core/milter-encoder.[ch], test/core/test-encoder.c:
	implement milter_encoder_encode_reply_add_header().

2008-10-01  Hiroyuki Ikezoe  <poincare@ikezoe.net>

	* milter-server/*: Added a skelton object for milter server.
	* milter-core/milter-option.h, milter-client/milter-client-context.h:
	Do not include <sys/socket.h> here. The header file is only included in
	milter-core/milter-encoder.h.
	* milter-core/milter-protocol.h, milter-client/milter-client.h:
	Move MilterClientStatus in milter-protocol.h and rename
	MilterClientStatus -> MilterStatus.
	* milter-client/milter-client.c,
	milter-server/milter-server-context.[ch],
	libmilter/libmilter-compatible.c,
	test/client/test-client-context-data.c,
	test/client/test-client-context-callback.c: MilterClientStatus ->
	MilterStatus.
	* milter-server/milter-server-context.[ch]: Declare some functions not
	implemented yet.
	* milter-client/milter-client-context.[ch], milter-code/*,
	libmilter/libmilter-compatible.c, test/core/*, test/client/*:
	option_negotiation -> negotiate.
	* test/client/test-client-context-header.c: option_negotiation ->
	negotiate.
	* milter-core/milter-handler.[ch]: Added an abstract object for
	MilterClientContext and MilterServerContext.
	* milter-core/milter-writer.c: Set error information only if GError is
	valid.
	* milter-core/milter-handler.c: Implement milter_handler_set_writer().
	* milter-core/milter-core.h: Include milter-handler.h.
	* milter-core/milter-handler.[ch]: Added
	milter_handler_get_decoder/encoder.
	* milter-client/milter-client-context.[ch]: MilterClientContext is now
	a child of MilterHandler. TODO: Remove MilterDecoder in
	MilterClientPrivate.

2008-09-30  Kouhei Sutou  <kou@cozmixng.org>

	* libmilter/libmilter-compatible.c,
	milter-client/milter-client.[ch], milter-core/milter-core.h:
	support smfi_setconn().

	* milter-core/milter-utils.c, test/core/test-utils.c: fix wrong
	size set.

	* milter-core/milter-utils.[ch], test/core/test-utils.c: support
	inet6:... parsing.

	* milter-core/milter-utils.[ch], test/core/test-utils.c: support
	inet:... parsing.

	* milter-core/milter-utils.[ch], test/core/test-utils.c: add
	connection spec parser.

	* milter-client/milter-client-context.c: cleanup.

	* milter-client/milter-client-context.c,
	milter-core/milter-encoder.[ch]: support discard.

	* milter-client/milter-client-context.c,
	milter-core/milter-encoder.[ch]: support accept.

	* milter-client/milter-client-context.[ch],
	milter-core/milter-encoder.[ch],
	milter-core/milter-protocol.h: fail temporarily -> temporary failure.

	* milter-client/milter-client-context.[ch],
	milter-core/milter-encoder.[ch],
	milter-core/milter-protocol.h: support tempfail.

	* libmilter/libmilter-compatible.c,
	milter-client/milter-client-context.c,
	milter-client/milter-client.c, milter-core/milter-encoder.c:
	support reject with text.

	* data/collect-packet.rb: add a auto-packet collector.
	* data/: update log.

2008-09-29  Kouhei Sutou  <kou@cozmixng.org>

	* milter-core/milter-encoder.[ch]
	(milter_encoder_encode_reply_reply_code),
	test/core/test-encoder.c (test_encode_reply_reply_code): add.

	* data/: add actual data.

	* milter-client/milter-client.c,
	milter-client/milter-client-context.[ch]: use MilterWriter.

	* milter-core/milter-writer.[ch], test/core/test-writer.c,
	milter-core/milter-core.h: implement MilterWriter.

	* libmilter/libmilter-compatible.c: bind callbacks.

	* milter-client/milter-client.[ch]: support context setup hook.

	* libmilter/mfdef.h: define compatible definitions.

	* libmilter/libmilter-compatible.c: use context setup hook.

	* milter-core/Makefile.am, milter-client/Makefile.am: install
	main header. (milter-core.h and milter-client.h)

	* Makefile.am, configure.ac, libmilter.pc.in, libmilter/: add
	libmilter compatible layer.

	* milter-client/milter-client.[ch],
	milter-client/milter-client-context.[ch]: implement experimental
	server part.

	* test/client/test-client-context-callback.c: fix wrong assertion.

	* milter-core/milter-encoder.[ch], test/core/test-encoder.c:
	implement continue reply encoder.

	* milter-client/milter-client-context.[ch],
	test/client/test-client-context-data.c: support reply message.

2008-09-26  Kouhei Sutou  <kou@cozmixng.org>

	* milter-client/milter-client-context.c: cleanup.

	* milter-client/milter-client-context.[ch],
	test/client/test-client-context-data.c: add tests for parse error.

	* milter-client/milter-client-context.[ch],
	test/client/test-client-context-data.c: add partial extended code
	parser.

	* milter-client/milter-client-context.[ch],
	test/client/test-client-context-data.c: add private data accessors.

	* test/client/Makefile.am, test/client/test-client-context.c:
	test-client-context.c -> test-client-context-callback.c

2008-09-19  Kouhei Sutou  <kou@cozmixng.org>

	* test/client/test-client-context.c: use data-driven-test.

	* milter-client/milter-client-context.c,
	test/client/test-client-context.c: support macro on end-of-message hook.

	* milter-client/milter-client-context.c,
	test/client/test-client-context.c: support macro on body hook.

	* milter-client/milter-client-context.c,
	test/client/test-client-context.c: support macro on end-of-header hook.

	* milter-client/milter-client-context.c,
	test/client/test-client-context.c: support macro on header hook.

	* milter-client/milter-client-context.c,
	test/client/test-client-context.c: support macro on envelope-receipt
	hook.

	* milter-client/milter-client-context.c,
	test/client/test-client-context.c: support macro on envelope-from
	hook.

	* milter-client/milter-client-context.c,
	test/client/test-client-context.c: support macro on HELO hook.

	* milter-client/milter-client-context.[ch],
	test/client/test-client-context.c: support macro on connect hook.

	* test/client/test-client-context.c: add tests for IPv6 and UNIX
	domain socket case.

	* milter-client/milter-client-context.c,
	test/client/test-client-context.c: support abort hook.

	* milter-client/milter-client-context.c,
	test/client/test-client-context.c: support close hook.

	* milter-client/milter-client-context.c,
	test/client/test-client-context.c: support end of message hook.

	* milter-client/milter-client-context.c,
	milter-client/milter-client-marshalers.list,
	test/client/test-client-context.c: support body hook.

	* milter-client/milter-client-context.c,
	milter-client/milter-client-marshalers.list,
	test/client/test-client-context.c: support end of header hook.

	* milter-client/milter-client-context.c,
	milter-client/milter-client-marshalers.list,
	test/client/test-client-context.c: support header hook.

	* milter-client/milter-client-context.c,
	test/client/test-client-context.c: support envelope-receipt hook.

	* milter-client/milter-client-context.c,
	test/client/test-client-context.c: support envelope-from hook.

	* milter-client/milter-client-context.[ch],
	test/client/test-client-context.c: support HELO hook.

	* milter-client/, test/client/: support option negotiation hook.

	* milter-client/, test/client/: MilterClientHandler ->
	MilterClientContext.

	* /: start to implement MilterClientHandler.

2008-09-18  Kouhei Sutou  <kou@cozmixng.org>

	* milter-core/milter-encoder.[ch], test/core/test-encoder.c:
	support ABORT, QUIT, unknown command.

	* milter-core/milter-encoder.[ch], test/core/test-encoder.c:
	support body and end of message.

	* milter-core/milter-encoder.[ch], test/core/test-encoder.c:
	support end of header.

	* milter-core/milter-encoder.[ch], test/core/test-encoder.c:
	support HEADER.

	* milter-core/milter-encoder.[ch], test/core/test-encoder.c:
	support RCPT.

	* milter-core/milter-encoder.[ch], test/core/test-encoder.c:
	support MAIL.

	* milter-core/milter-encoder.[ch], test/core/test-encoder.c:
	support HELO.

	* milter-core/milter-encoder.c (milter_encoder_encode_connect): cleanup.

	* milter-core/milter-encoder.[ch], test/core/test-encoder.c:
	support connect.

	* milter-core/, test/: remove MilterContextType.
	* milter-core/milter-encoder.[ch], test/core/test-encoder.c:
	support define macro.

	* test/core/test-encoder.c: add a test for option is NULL case.

	* milter-core/, test/: use gchar ** and gsize * instead of GString *
	to receive encoded packet.

	* miter-code/, test/: add MilterEncoder.

	* /: parser -> decoder.

	* milter-core/milter-parser.c, test/core/test-milter.c: improve
	error handling.

	* milter-core/milter-parser.c, test/core/test-milter.c: support
	OPTION NEGOTIATION.

2008-09-17  Kouhei Sutou  <kou@cozmixng.org>

	* test/core/test-option.c: add tests for accessors of
	MilterActionFlags and MilterStepFlags.

	* milter-core/milter-option.[ch], test/core/test-milter.c: support
	properties.

	* milter-core/milter-option.[ch], test/core/test-milter.c: add
	MilterOption.

	* milter-core/milter-parser.[ch], test/core/test-parser.c: improve
	error handling.

	* milter-core/milter-parser.c: cleanup.

2008-09-16  Kouhei Sutou  <kou@cozmixng.org>

	* milter-core/milter-parser.[ch], test/core/test-parser.c: improve
	error handling.

	* /: McParser -> MilterParser.
	* milter-core/: add.
	* test/: client -> core.

	* milter-client/mc-parser.[ch], test/client/test-mc-parser.c:
	support UNKNOWN command.

	* milter-client/mc-parser.[ch],	test/client/test-mc-parser.c:
	support QUIT command.

	* test/client/test-mc-parser.c: support ABORT command.

	* milter-client/mc-parser.[ch], milter-client/mc-marshalers.list,
	test/client/test-mc-parser.c: support END OF MESSAGE command.

	* milter-client/mc-parser.[ch], milter-client/mc-marshalers.list,
	test/client/test-mc-parser.c: support BODY command.

	* milter-client/mc-parser.[ch], milter-client/mc-marshalers.list,
	test/client/test-mc-parser.c: support END OF HEADER command.

	* milter-client/mc-parser.[ch], milter-client/mc-marshalers.list,
	test/client/test-mc-parser.c: support HEADER command.

2008-09-12  Kouhei Sutou  <kou@cozmixng.org>

	* milter-client/mc-parser.[ch], test/client/test-mc-parser.c:
	support RCPT command.

	* milter-client/mc-parser.[ch], test/client/test-mc-parser.c:
	support MAIL command.

	* milter-client/mc-parser.[ch], test/client/test-mc-parser.c:
	support HELO command.

	* milter-client/mc-parser.[ch], test/client/test-mc-parser.c:
	support CONNECT command but too duty!.

	* test/client/test-mc-parser.c: fix wrong test data.

	* milter-client/mc-parser.[ch]: support define macro on header context.

2008-09-11  Kouhei Sutou  <kou@cozmixng.org>

	* configure.ac: require Cutter >= 1.0.5.

	* milter-client/mc-parser.[ch], test/client/test-mc-parser.c:
	support define macro on HELO/MAIL context.

	* test/client/test-mc-parser.c (test_parse_define_macro): use data
	driven test style.

2008-09-10  Kouhei Sutou  <kou@cozmixng.org>

	* milter-client/mc-parser.[ch], test/client/test-mc-parser.c:
	partially implement define macro command.

	* milter-client/: add enum-types and marshalers.

2008-09-08  Kouhei Sutou  <kou@cozmixng.org>

	* milter-client/mc-parser.[ch] (mc_parser_parse),
	test/client/test-mc-parser.c: add command length error handling.

2008-09-05  Kouhei Sutou  <kou@cozmixng.org>

	* milter-client/, test/client/: add.

	* data/milter-packet.txt: add a sample milter packet.

2008-09-03  Kouhei Sutou  <kou@cozmixng.org>

	* Makefile.am: remove needless command.

	* ./: add milter-client/.

2008-09-01  Kouhei Sutou  <kou@cozmixng.org>

	* ./: start.

