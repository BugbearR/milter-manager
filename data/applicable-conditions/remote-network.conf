# -*- ruby -*-

# FIXME
define_applicable_condition("remote-network") do |condition|
  condition.description = "Check only remote network"

  condition.define_connect_checker do |child, host, address|
    host == "localhost"
  end

  condition.define_envelope_from_checker do |child, from|
    from =~ /@my-domain1.example.com\z/
  end

  condition.define_envelope_recipient_checker do |child, recipient|
    recipient =~ /@my-domain2.example.com\z/
  end

  condition.define_header_checker do |child, name, value|
    name == "X-Internal" and value =~ /\A(yes|true)\z/i
  end
end
